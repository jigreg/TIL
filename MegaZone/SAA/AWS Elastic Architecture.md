# AWS SAA

---

## 탄력적 아키텍처 설계

### AWS Route 53

---

#### 장애 조치

- 액티브-액티브 장애 조치 : 모든 리소스를 대부분의 시간 동안 사용 가능하도록
                            동일한 이름, 동일한 유형(A 또는 AAAA) 및 동일한 라우팅 정책(가중치, 지연시간)를 보유한 모든 레코드는 Route 53이 비정상으로 간주하지 않는 이상 활성 상태
                            Route 53은 정상 레코드를 사용하여 DNS 쿼리 응답
- 액티브-패시브 장애 조치 : 기본 리소스 또는 리소스 그룹이 대부분의 시간동안 사용가능하도록 하고 보조 리소스 또는 리소스 그룹은 기본 리소스가 사용 불가능할 경우를 대비 해 대기중에 있도록
                            쿼리에 응답할 때 Route 53은 정상적인 1차 리소스 포함
                            1차 리소스가 비정상이면 정상적인 2차 리소스만 포함

#### 쿼리 응답 방식

- 단순 라우팅 정책 : 도메인에 대해 특정 기능을 수행하는 하나의 리소스만 있을때
- 장애 조치 라우팅 정책 : 액티브-패시브 장애 조치 구성
- 지리 위치 라우팅 정책 : 사용자의 위치에 기반하여 트래픽 라우팅하는 경우
- 지리 근접 라우팅 정책 : 리소스의 위치를 기반으로 트래픽을 라우팅하고 필요에 따라 한 위치의 리소스에서 다른 위치의 리소스로 트래픽을 보내려는 경우
- 지연 시간 라우팅 정책 : 여러 AWS 리전에 리소스가 있고 최상의 지연 시간을 제공하는 리전으로 트래픽을 라우팅하려는 경우
- 다중 응답 라우팅 정책 : Route 53이 DNS 쿼리에 무작위로 선택된 초대 8개의 정상 레코드로 응답하게 하려는 경우
- 가중치 기반 라우팅 정책 : 사용자가 지정하는 비율에 따라 여러 리소스로 트래픽을 라우팅하려는 경우

### AWS RDS

- RDS 인스턴스는 데이터베이스일 뿐 정적 콘텐츠를 저장하기에 적합 X
- RDS는 다중 AZ 배포 구성에서 실행되지 않는 한 내구성 X
- 다중 AZ 배포는 RDS 데이터베이스 인스턴스를 위해 향상된 가용성 및 내구성을 제공 -> 프로덕션 데이터베이스 워크로드에 적합
- 다중 AZ DB 인스턴스를 프로비저닝하면 Amazon RDS는 자동으로 하나의 기본 DB 인스턴스를 생성하고 동시에 다른 가용 영역의 예비 인스턴스에 데이터 복제
- 각 AZ는 물리적으로 분리된 자체 독립 인프라에서 실행되며 높은 안정성 제공
- 인프라 장애가 발생해도 예비 인스턴스로 자동 장애 조치를 수행
- 장애 조치 후에도 DB 인스턴스의 엔드 포인트는 그대로 유지
- RDS 엔진 사용하면 확장성을 높이기 위해 읽기 전용 복제본 추가하고 장애 발생 시 데이터베이스 가용성을 유지
- 읽기 전용 복제본은 다른 AZ에서 자체 예비 인스턴스와 함께 설정
- 다중 AZ는 RDS에 대한 동기 복제 (Aurora: 비동기식 복제)
- 장애 조치는 RDS가 자동으로 처리하므로 관리자가 개입하지 않고 신속하게 데이터베이스 작업을 재개
- 장애 조치 시, RDS는 DB 인스턴스의 정식 이름 레코드(CNAME)가 예비 복제본을 가리키도록 변경
- 예비 복제본이 승격되어 새 기본 복제본이 됨

### Amazon EBS 볼륨

- S3에 비해 내구성이 떨어짐
- 내구성이 있는 블록 수준 스토리지 디바이스, 인스턴스 연결 가능
- 물리적 하드드라이브처럼 사용, 유연함
- 현재 세대 볼륨은 크기를 동적으로 늘리고 프로비저닝된 IOPS 용량을 수정
- 여러 EBS 볼륨을 단일 인스턴스에 연결, 볼륨 및 인스턴스는 동일 가용 영역에 위치
- 볼륨 및 인스턴스 유형에 따라 다중 연결을 사용하여 볼륨을 여러 인스턴스에 동시에 탑재
- 자동으로 복제되고 단일 구성 요소에 장애가 발생해도 안전하게 보호
- 범용 SSD(gp2)
- 프로비저닝된 IOPS SSD(io1)
- 처리량에 최적화된 HDD(st1)
- Cold HDD(sc1)
- Magnetic(standard, 이전 세대 유형)

### AWS S3

- 인터넷상 어디서나 원하는 양의 데이터를 저장하고 검색할 수 있도록 구축된 객체 스토리지
- 안정성 뛰어나고 가용성이 높으며 무제한으로 확장 가능한 데이터 스토리지 인프라
- 정적 웹 사이트 호스팅 가능
- 동적 웹사이트 (PHP,JSP)등 서버 측 스크립트를 포함한 서버 측 처리에 의존
- 서버 측 암호화 지원 X

### AWS EC2 & VPC 서브넷

- EC2 인스턴스가 다시 시작되면 보유한 데이터가 즉시 지워짐
- 모든 서브넷은 해당 서브넷에서 생성된 네트워크 인터페이스에 퍼블릭 IPv4 주소가 할당 될 것인지 결정하는 수정 가능한 속성 가짐
- 기본이 아닌 서브넷은 IPv4 퍼블릭 주소 지정 속성이 false로 기본 설정되어 있고, 기본 서브넷은 이 속성이 true로 기본 설정