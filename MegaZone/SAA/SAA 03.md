# SAA 03 
1. DynamoDB

`워크로드를 균등하게 분배하고 프로비저닝 된 처리량을 효율적으로 사용하여 데이터베이스 성능을 향상`
테이블의 프로비저닝된 처리량의 최적 사용량은 개별 항목의 워크로드 패턴과 파티션-키 설계가 결정합니다. 
이는 모든 파티션 키 값에 액세스하여 효율적인 처리량 수준을 달성해야 한다는 의미는 아닙니다. 
또한 액세스된 파티션 키 값의 백분율이 높아야 한다는 의미는 더더욱 아닙니다. 워크로드가 액세스하는 고유 파티션 키 값이 많을 수록 요청이 여러 파티션 공간으로 더 많이 분산된다는 의미입니다. 
일반적으로 총 파티션 키 값에 액세스한 파티션 키 값의 비율이 증가할수록 처리량을 보다 효율적으로 활용할 수 있습니다.
테이블이 단일 파티션에 꼭 맞으며(시간 경과에 따른 데이터 증가 고려) 애플리케이션의 읽기 및 쓰기 처리량 요구 사항이 단일 파티션의 읽기 및 쓰기 능력을 초과하지 않으면, 애플리케이션에 파티셔닝으로 인한 예상치 않은 조절(병목) 현상이 발생하지 않습니다.

3. Amazon S3 Transfre Acceleration

Amazon S3 Transfer Acceleration은 거리가 먼 클라이언트와 S3 버킷 간에 파일을 빠르고, 쉽고, 안전하게 전송할 수 있게 해줍니다. 
`Transfer Acceleration은 전 세계적으로 분산되어 있는 Amazon CloudFront의 엣지 로케이션을 활용합니다. 엣지 로케이션에 도착한 데이터는 최적화된 네트워크 경로를 통해 Amazon S3로 라우팅됩니다.`

버킷에서 Transfer Acceleration을 사용하는 이유는 다음과 같이 다양합니다.

- 전 세계 각지에서 중앙의 버킷으로 업로드하는 고객이 있을 경우
- 전 세계에 정기적으로 수 기가바이트에서 수 테라바이트의 데이터를 전송할 경우
- Amazon S3에 업로드할 경우 인터넷을 통해 사용 가능한 대역폭을 충분히 활용하지 못할 수 있습니다.

S3 Transfer Acceleration은 대역폭을 충분히 사용하고, 거리가 처리량에 미치는 영향을 최소화할 수 있으며, 클라이언트의 위치와 상관없이 데이터를 Amazon S3로 일관되게 빠른 속도로 전송할 수 있도록 설계되었습니다. 가속화의 수준은 기본적으로 사용 가능한 대역폭, 소스와 대상 간의 거리, 네트워크 경로의 패킷 손실률에 따라 달라집니다. 일반적으로 소스와 대상 간의 거리가 더 멀고, 사용 가능한 대역폭이 많고, 객체 크기가 클수록 가속화가 잘 되는 것을 볼 수 있습니다.

한 고객은 미국, 유럽 및 아시아 일부에 분산된 글로벌 사용자 기반에서 300MB 파일을 아시아 태평양(시드니) 리전에 있는 버킷으로 수집하는 데 걸리는 시간을 평균 50% 단축했습니다. 다른 고객은 동남아시아와 호주의 사용자가 250MB 파일(50MB 단위로 나누어)을 미국 동부(버지니아 북부) 리전에 있는 S3 버킷으로 업로드할 때 성능이 500% 이상 향상된 사례를 확인했습니다.

Transfer Acceleration을 사용할 경우 데이터 전송 요금이 추가로 적용될 수 있습니다.

5. SSH

SSH 로그인 오류
- SSH 개인 키를 사용하고 있지만 해당 공개 키가 authorized_keys 파일에 없습니다.
- authorized_keys 파일에 대한 권한이 없습니다.
- .ssh 폴더에 대한 권한이 없습니다.
- authorized_keys 파일 또는 .ssh 폴더의 이름이 올바르게 지정되지 않았습니다.
- authorized_keys 파일 또는 .ssh 폴더가 삭제되었습니다.
- 인스턴스가 키 없이 시작되었거나 잘못된 키로 시작되었습니다.

"Server rejected our key" 오류가 발생한 후 EC2 인스턴스에 연결하려면 인스턴스의 사용자 데이터를 업데이트하여 지정된 SSH 공용 키를 authorized_keys 파일에 추가하면 됩니다. 이 파일은 SSH 디렉토리와 파일에 대한 적절한 소유권과 파일 사용 권한을 설정합니다.

7. Amazon RDS Multi-AZ

Amazon RDS Multi-AZ 배포는 데이터베이스 인스턴스에 향상된 가용성과 내구성을 제공하여 프로덕션 데이터베이스 워크로드에 적합합니다. 
Multi-AZ DB 인스턴스를 프로비저닝하면 Amazon RDS는 자동으로 기본 DB 인스턴스를 생성하고 데이터를 다른 가용 영역( AZ, Availability Zone)의 대기 인스턴스에 동기적으로 복제합니다. 
각 AZ는 물리적으로 구별되는 독립된 인프라에서 실행되며, 신뢰성이 뛰어나도록 설계되었습니다.

인프라 오류가 발생하는 경우 Amazon RDS는 사용자가 페일오버가 완료되는 즉시 데이터베이스 작업을 재개할 수 있도록 대기(또는 Amazon Aurora의 경우 읽기 복제본)에 대한 자동 페일오버를 수행합니다. 
오류 해결 후에도 DB 인스턴스의 엔드포인트은 동일하게 유지되므로 애플리케이션은 수동 관리 작업 없이도 데이터베이스 작업을 재개할 수 있습니다.

이 시나리오에서는 기본 데이터베이스 인스턴스가 중단되더라도 고가용성을 보장하기 위해 Multi-AZ를 배포한 RDS의 Oracle 데이터베이스로 사용하는 것이 가장 좋습니다. 따라서 Multi-AZ 배포를 사용하여 RDS에서 Oracle 데이터베이스를 생성하는 것이 정답입니다.

11. Amazon Cognito

Amazon Cognito는 웹 및 모바일 앱에 대한 인증, 권한 부여 및 사용자 관리를 제공합니다. 사용자는 사용자 이름과 암호를 사용하여 직접 로그인하거나 Facebook, Amazon, Google 또는 Apple 같은 타사를 통해 로그인할 수 있습니다.

Amazon Cognito의 두 가지 주요 구성 요소는 사용자 풀과 자격 증명 풀입니다. 사용자 풀은 앱 사용자의 가입 및 로그인 옵션을 제공하는 사용자 디렉터리입니다. 자격 증명 풀을 통해 기타 AWS 서비스에 대한 사용자 액세스 권한을 부여할 수 있습니다. 자격 증명 풀과 사용자 풀을 별도로 또는 함께 사용할 수 있습니다.

사용자 풀은 Amazon Cognito의 사용자 디렉터리입니다. 사용자 풀에서 사용자는 Amazon Cognito를 통해, 또는 타사 자격 증명 공급자(IdP)를 통해 연동하여 웹 또는 모바일 앱에 로그인할 수 있습니다. 사용자가 직접 또는 타사를 통해 로그인하는지 여부와 무관하게 사용자 풀의 모든 멤버는 디렉터리 프로필을 보유하며, SDK를 통해 이를 액세스할 수 있습니다.

사용자 풀 제공 사항:
- 가입 및 로그인 서비스.
- 사용자 로그인을 위한 내장 사용자 지정 웹 UI
- Facebook, Google, Login with Amazon 및 Sign in with Apple을 통한 소셜 로그인 및 사용자 풀의 SAML 및 OIDC 자격 증명 공급자를 통한 로그인.
- 사용자 디렉터리 관리 및 사용자 프로필.
- 멀티 팩터 인증(MFA), 이상 있는 자격 증명 확인, 계정 탈취 보호, 전화 및 이메일 확인과 같은 보안 기능.
- AWS Lambda 트리거를 통한 사용자 지정 워크플로우 및 사용자 마이그레이션.

자격 증명 풀로 사용자는 임시 AWS 자격 증명을 얻어 Amazon S3 및 DynamoDB 등과 같은 다른 AWS 서비스에 액세스할 수 있습니다. 자격 증명 풀은 익명 게스트 사용자는 물론 자격 증명에 대한 사용자 인증에 사용할 수 있는 다음 자격 증명 공급자를 지원합니다.

- Amazon Cognito 사용자 풀
- Facebook, Google, Login with Amazon 및 Sign in with Apple을 통한 소셜 로그인
- OpenID Connect(OIDC) 공급자
- SAML 자격 증명 공급자
- 개발자 인증 자격 증명

사용자 프로필 정보를 저장하려면 자격 증명 풀이 사용자 풀에 통합되어야 합니다.

Amazon Cognito를 사용하여 애플리케이션에 권한이 제한된 임시 자격 증명을 전달하면 사용자가 AWS 리소스에 액세스할 수 있습니다.

Amazon Cognito는 인증된 자격 증명과 인증되지 않은 자격 증명을 모두 지원합니다. 미인증 사용자는 자격 증명이 인증되지 않았으므로 앱 혹은 자격 증명의 인증이 중요하지 않은 경우 게스트 사용자 역할에 적합합니다. 인증받은 사용자는 타사 자격 증명 공급자(IdP)를 통해, 또는 자격 증명을 인증받은 사용자 풀을 통해 애플리케이션에 로그인합니다. 미인증 사용자의 액세스 권한을 허용하지 않도록 리소스 권한 범위를 충분히 정했는지 확인하십시오.

Amazon Cognito ID는 자격 증명이 아닙니다. AWS Security Token Service(AWS STS)에서 웹 자격 증명 연동 지원을 사용하여 자격 증명으로 교환되는 것입니다. 앱 사용자를 위해 AWS 자격 증명을 얻는 권장 방법은 AWS.CognitoIdentityCredentials를 사용하는 것입니다. 그러면 자격 증명 객체의 ID가 AWS STS를 사용하여 자격 증명용으로 교환됩니다.

인증되지 않은 사용자를 허용하는 경우 또는 사용자를 인증하는 경우 자격 증명 공급자에서 로그인 토큰을 설정한 후에 최종 사용자의 Amazon Cognito 식별자(자격 증명 ID)를 즉시 검색할 수 있습니다.
